{"ast":null,"code":"import _classCallCheck from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/src/components/NetworkMap.js\";\nimport \"../css/NetworkMap.css\";\nimport React from \"react\";\nimport networkIcon from \"../assets/connection.png\";\nimport zc from \"@dvsl/zoomcharts\";\nimport AnnotSidebar from \"./Sidebar\";\nimport { Button, Header, Icon, Image, Menu, Segment, Sidebar } from \"semantic-ui-react\";\nvar Chart = zc.NetChart; // Zoomcharts license and license key\n\nwindow.ZoomChartsLicense = \"ZCS-101rm718m: ZoomCharts SDK 30 day Free Trial License for che..@..l.com (valid for testing only); upgrades until: 2020-03-21\";\nwindow.ZoomChartsLicenseKey = \"39d8cd3eba17f98d5c4b5862a4db1effed5b48b4f96a0d9450\" + \"229bb8b24b0f012c2e95c31e6fdd092901628a73aa3511b6aca50b26575c1dc9c5033b42243a0\" + \"842344a7ea2b32b34cbfc406ea3ea1e1950de24892ebcf773a8157a460fa346039dbd27458a43\" + \"1b5a855d2da8c211526c28caba6402542aac71a8af5b2e3982387394dbf9f4b450da9b8017aad\" + \"08d6e9057b6f40cfa3f52c7cec3b38a40e93e5b6074da373c42810f8f7171396566c2ffacbb12\" + \"5fcf57332ec7afb9264fc6d35a2bb9e20830093d469d92fef823020004ec2dd7f908ee9a7bfb6\" + \"c5fd0134969d7dca1050eeffed66884866f97ae26895c32dd13c8e5cf6c9c37e4a1169ccdaa01\";\n\nvar NetworkMap =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NetworkMap, _React$Component);\n\n  function NetworkMap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NetworkMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NetworkMap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      annotId: \"\",\n      visible: false,\n      preTag: \"\"\n    };\n\n    _this.handleSidebarHide = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(NetworkMap, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // console.log(\"pass tag here:\", this.props.passTag);\n      // console.log(\"show me\", this.props.searchedAnnots.data);\n      var selectedTag = this.props.passTag;\n      var array = this.props.searchedAnnots.data.filter(function (arr) {\n        return arr.references === undefined;\n      });\n      var annotArray = array.map(function (arr) {\n        return {\n          annotId: arr.id,\n          created: arr.created,\n          document: arr.document,\n          links: arr.links,\n          tags: arr.tags,\n          target: arr.target,\n          text: arr.text,\n          uri: arr.uri,\n          user: arr.user.substring(arr.user.indexOf(\":\") + 1, arr.user.indexOf(\"@\"))\n        };\n      });\n      console.log(\"no references:\", annotArray);\n      var arrayModify = annotArray.reduce(function (o, cur) {\n        var occurs = o.reduce(function (n, item, i) {\n          return item.user === cur.user ? i : n;\n        }, -1);\n\n        if (occurs >= 0) {\n          o[occurs].text = o[occurs].text.concat(cur.text);\n          o[occurs].annotId = o[occurs].annotId.concat(cur.annotId);\n        } else {\n          var obj = {\n            user: cur.user,\n            text: [cur.text],\n            annotId: [cur.annotId]\n          };\n          o = o.concat([obj]);\n        }\n\n        return o;\n      }, []); // console.log(\"same user array:\", arrayModify);\n\n      var newNodesM = [];\n      var newNodesT = [];\n      var newLinksM = [];\n      var newLinksT = []; // nodes data\n\n      for (var i = 0; i < arrayModify.length; i++) {\n        newNodesM.push({\n          id: \"A\" + i,\n          style: {\n            label: arrayModify[i].user,\n            fillColor: \"#65BCF8\",\n            // lineColor: \"#59A8DF\",\n            lineColor: \"rgba(89, 168, 223, 0.5)\"\n          },\n          loaded: true\n        });\n      }\n\n      var newNodesMM = [{\n        id: \"T\",\n        style: {\n          label: selectedTag,\n          fillColor: \"#912F40\",\n          // lineColor: \"#AB1927\",\n          lineColor: \"rgba(171, 25, 39, 0.5)\"\n        },\n        loaded: true\n      }].concat(newNodesM);\n\n      for (var j = 0; j < arrayModify.length; j++) {\n        if (arrayModify[j].text.length > 1) {\n          for (var k = 0; k < arrayModify[j].text.length; k++) {\n            newNodesT.push({\n              id: \"A\" + j + \"N\" + k,\n              style: {\n                label: arrayModify[j].text[k],\n                fillColor: \"#68CF9D\",\n                // lineColor: \"#62BC90\",\n                lineColor: \"rgba(98, 188, 144, 0.5)\"\n              },\n              annotId: arrayModify[j].annotId[k],\n              loaded: true,\n              multiple: \"yes\"\n            });\n          }\n        } else {\n          newNodesT.push({\n            id: \"A\" + j + \"N\" + j,\n            style: {\n              label: arrayModify[j].text[0],\n              fillColor: \"#68CF9D\",\n              // lineColor: \"#62BC90\",\n              lineColor: \"rgba(98, 188, 144, 0.5)\"\n            },\n            annotId: arrayModify[j].annotId[0],\n            loaded: true\n          });\n        }\n      }\n\n      var newNodes = newNodesMM.concat(newNodesT);\n      console.log(\"newNodes\", newNodes); // links data\n\n      for (var i = 0; i < newNodesM.length; i++) {\n        newLinksM.push({\n          id: \"L\" + i,\n          from: newNodesM[i].id,\n          to: \"T\",\n          type: \"creators\"\n        });\n      }\n\n      for (var i = 0; i < newNodesT.length; i++) {\n        newLinksT.push({\n          id: \"LN\" + i,\n          from: newNodesT[i].id,\n          to: newNodesT[i].id.substring(newNodesT[i].id.indexOf(\"A\"), newNodesT[i].id.indexOf(\"N\")),\n          type: \"annots\"\n        });\n      }\n\n      var newLinks = newLinksM.concat(newLinksT); // console.log(\"newLinks\", newLinks);\n\n      var self = this;\n\n      if (selectedTag !== \"\" && selectedTag !== self.state.preTag) {\n        var nodeStyle = function nodeStyle(node) {\n          if (node.hovered) {\n            node.radius = 38;\n          } else {\n            node.radius = 30;\n          }\n        };\n\n        var linkStyle = function linkStyle(link) {\n          if (link.hovered) {\n            link.radius = 2;\n            link.fillColor = \"#979797\";\n            link.shadowColor = \"#979797\";\n          } else {\n            link.radius = 1;\n            link.fillColor = \"#D8D8D8\";\n          }\n        };\n\n        var graphDoubleClick = function graphDoubleClick(event) {\n          event.preventDefault();\n\n          if (event.clickNode.data.annotId) {\n            self.setState({\n              annotId: event.clickNode.data.annotId,\n              visible: true,\n              preTag: selectedTag\n            });\n            self.props.fetchFullAnnot(event.clickNode.data.annotId);\n          }\n        };\n\n        var t = new Chart({\n          container: document.getElementById(\"chartNetChart\"),\n          area: {\n            style: {\n              fillColor: \"#f9fbfd\"\n            }\n          },\n          navigation: {\n            focusNodeExpansionRadius: 1,\n            initialNodes: [\"T\"],\n            mode: \"focusnodes\"\n          },\n          layout: {\n            mode: \"radial\",\n            nodeSpacing: 30\n          },\n          style: {\n            node: {\n              display: \"roundtext\",\n              lineWidth: 5 // lineDash: [10, 2, 5, 2]\n\n            },\n            nodeStyleFunction: nodeStyle,\n            linkStyleFunction: linkStyle,\n            link: {\n              fillColor: \"#D8D8D8\" // lineDash: [10, 5, 5, 5]\n\n            },\n            nodeHovered: {\n              shadowBlur: 1\n            },\n            linkHovered: {\n              shadowBlur: 1\n            },\n            nodeLabel: {\n              textStyle: {\n                fillColor: \"white\"\n              } // nodeStyleFunction: function(node) {\n              //   node.image =\n              //     \"https://zoomcharts.com/dvsl/data/net-chart/friend-net/\" +\n              //     node.id +\n              //     \".png\";\n              //   node.label = node.data.name;\n              // }\n\n            }\n          },\n          data: {\n            preloaded: {\n              nodes: newNodes,\n              links: newLinks\n            }\n          },\n          events: {\n            onDoubleClick: graphDoubleClick\n          },\n          toolbar: {\n            fullscreen: true,\n            enabled: true\n          },\n          interaction: {\n            resizing: {\n              enabled: false\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"renderAnnots\",\n    value: function renderAnnots() {\n      // console.log(\"annotprops\", this.props.searchedAnnots.data);\n      // console.log(\n      //   \"annotprops jason\",\n      //   JSON.stringify(this.props.searchedAnnots.data)\n      // );\n      if (this.props.passTag == \"\") {\n        return React.createElement(\"div\", {\n          className: \"img-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"temp-image\",\n          src: networkIcon,\n          alt: \"network icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"temp-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"text-color-red\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, \"Choose\"), \" or\", \" \", React.createElement(\"span\", {\n          className: \"text-color-blue\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }, \"Search\"), \" the Tag \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 295\n          },\n          __self: this\n        }), \" to Create Your Personal Learning Network\"));\n      } // return this.props.searchedAnnots.data.map(annot => {\n      //   return (\n      //     <div key={annot.id}>\n      //       <p>{annot.user}</p>\n      //       <p>{annot.text}</p>\n      //       <p className=\"tags\">{annot.tags.join(\", \")}</p>\n      //     </div>\n      //   );\n      // });\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var visible = this.state.visible;\n      return React.createElement(\"div\", {\n        className: \"map-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, React.createElement(Sidebar.Pushable, {\n        as: Segment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        as: Menu,\n        animation: \"overlay\",\n        icon: \"labeled\",\n        inverted: true,\n        onHide: this.handleSidebarHide,\n        vertical: true,\n        visible: visible,\n        width: \"wide\",\n        direction: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, React.createElement(AnnotSidebar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      })), React.createElement(Sidebar.Pusher, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        basic: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"chartNetChart\",\n        className: \"chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"cover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, this.renderAnnots())))));\n    }\n  }]);\n\n  return NetworkMap;\n}(React.Component);\n\nexport default NetworkMap;","map":{"version":3,"sources":["/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/src/components/NetworkMap.js"],"names":["React","networkIcon","zc","AnnotSidebar","Button","Header","Icon","Image","Menu","Segment","Sidebar","Chart","NetChart","window","ZoomChartsLicense","ZoomChartsLicenseKey","NetworkMap","state","annotId","visible","preTag","handleSidebarHide","setState","selectedTag","props","passTag","array","searchedAnnots","data","filter","arr","references","undefined","annotArray","map","id","created","document","links","tags","target","text","uri","user","substring","indexOf","console","log","arrayModify","reduce","o","cur","occurs","n","item","i","concat","obj","newNodesM","newNodesT","newLinksM","newLinksT","length","push","style","label","fillColor","lineColor","loaded","newNodesMM","j","k","multiple","newNodes","from","to","type","newLinks","self","nodeStyle","node","hovered","radius","linkStyle","link","shadowColor","graphDoubleClick","event","preventDefault","clickNode","fetchFullAnnot","t","container","getElementById","area","navigation","focusNodeExpansionRadius","initialNodes","mode","layout","nodeSpacing","display","lineWidth","nodeStyleFunction","linkStyleFunction","nodeHovered","shadowBlur","linkHovered","nodeLabel","textStyle","preloaded","nodes","events","onDoubleClick","toolbar","fullscreen","enabled","interaction","resizing","renderAnnots","Component"],"mappings":"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","sourcesContent":["import \"../css/NetworkMap.css\";\nimport React from \"react\";\nimport networkIcon from \"../assets/connection.png\";\nimport zc from \"@dvsl/zoomcharts\";\nimport AnnotSidebar from \"./Sidebar\";\n\nimport {\n  Button,\n  Header,\n  Icon,\n  Image,\n  Menu,\n  Segment,\n  Sidebar\n} from \"semantic-ui-react\";\n\nlet Chart = zc.NetChart;\n\n// Zoomcharts license and license key\nwindow.ZoomChartsLicense =\n  \"ZCS-101rm718m: ZoomCharts SDK 30 day Free Trial License for che..@..l.com (valid for testing only); upgrades until: 2020-03-21\";\nwindow.ZoomChartsLicenseKey =\n  \"39d8cd3eba17f98d5c4b5862a4db1effed5b48b4f96a0d9450\" +\n  \"229bb8b24b0f012c2e95c31e6fdd092901628a73aa3511b6aca50b26575c1dc9c5033b42243a0\" +\n  \"842344a7ea2b32b34cbfc406ea3ea1e1950de24892ebcf773a8157a460fa346039dbd27458a43\" +\n  \"1b5a855d2da8c211526c28caba6402542aac71a8af5b2e3982387394dbf9f4b450da9b8017aad\" +\n  \"08d6e9057b6f40cfa3f52c7cec3b38a40e93e5b6074da373c42810f8f7171396566c2ffacbb12\" +\n  \"5fcf57332ec7afb9264fc6d35a2bb9e20830093d469d92fef823020004ec2dd7f908ee9a7bfb6\" +\n  \"c5fd0134969d7dca1050eeffed66884866f97ae26895c32dd13c8e5cf6c9c37e4a1169ccdaa01\";\n\nclass NetworkMap extends React.Component {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {\n  //     annotId: \"\"\n  //   };\n  // }\n  state = {\n    annotId: \"\",\n    visible: false,\n    preTag: \"\"\n  };\n\n  componentDidUpdate() {\n    // console.log(\"pass tag here:\", this.props.passTag);\n    // console.log(\"show me\", this.props.searchedAnnots.data);\n    const selectedTag = this.props.passTag;\n    const array = this.props.searchedAnnots.data.filter(arr => {\n      return arr.references === undefined;\n    });\n\n    const annotArray = array.map(arr => {\n      return {\n        annotId: arr.id,\n        created: arr.created,\n        document: arr.document,\n        links: arr.links,\n        tags: arr.tags,\n        target: arr.target,\n        text: arr.text,\n        uri: arr.uri,\n        user: arr.user.substring(\n          arr.user.indexOf(\":\") + 1,\n          arr.user.indexOf(\"@\")\n        )\n      };\n    });\n    console.log(\"no references:\", annotArray);\n\n    const arrayModify = annotArray.reduce((o, cur) => {\n      var occurs = o.reduce((n, item, i) => {\n        return item.user === cur.user ? i : n;\n      }, -1);\n      if (occurs >= 0) {\n        o[occurs].text = o[occurs].text.concat(cur.text);\n        o[occurs].annotId = o[occurs].annotId.concat(cur.annotId);\n      } else {\n        var obj = {\n          user: cur.user,\n          text: [cur.text],\n          annotId: [cur.annotId]\n        };\n        o = o.concat([obj]);\n      }\n      return o;\n    }, []);\n\n    // console.log(\"same user array:\", arrayModify);\n\n    const newNodesM = [];\n    const newNodesT = [];\n    const newLinksM = [];\n    const newLinksT = [];\n\n    // nodes data\n    for (var i = 0; i < arrayModify.length; i++) {\n      newNodesM.push({\n        id: \"A\" + i,\n        style: {\n          label: arrayModify[i].user,\n          fillColor: \"#65BCF8\",\n          // lineColor: \"#59A8DF\",\n          lineColor: \"rgba(89, 168, 223, 0.5)\"\n        },\n        loaded: true\n      });\n    }\n\n    var newNodesMM = [\n      {\n        id: \"T\",\n        style: {\n          label: selectedTag,\n          fillColor: \"#912F40\",\n          // lineColor: \"#AB1927\",\n          lineColor: \"rgba(171, 25, 39, 0.5)\"\n        },\n        loaded: true\n      },\n      ...newNodesM\n    ];\n\n    for (var j = 0; j < arrayModify.length; j++) {\n      if (arrayModify[j].text.length > 1) {\n        for (var k = 0; k < arrayModify[j].text.length; k++) {\n          newNodesT.push({\n            id: \"A\" + j + \"N\" + k,\n            style: {\n              label: arrayModify[j].text[k],\n              fillColor: \"#68CF9D\",\n              // lineColor: \"#62BC90\",\n              lineColor: \"rgba(98, 188, 144, 0.5)\"\n            },\n            annotId: arrayModify[j].annotId[k],\n            loaded: true,\n            multiple: \"yes\"\n          });\n        }\n      } else {\n        newNodesT.push({\n          id: \"A\" + j + \"N\" + j,\n          style: {\n            label: arrayModify[j].text[0],\n            fillColor: \"#68CF9D\",\n            // lineColor: \"#62BC90\",\n            lineColor: \"rgba(98, 188, 144, 0.5)\"\n          },\n          annotId: arrayModify[j].annotId[0],\n          loaded: true\n        });\n      }\n    }\n\n    const newNodes = newNodesMM.concat(newNodesT);\n    console.log(\"newNodes\", newNodes);\n\n    // links data\n    for (var i = 0; i < newNodesM.length; i++) {\n      newLinksM.push({\n        id: \"L\" + i,\n        from: newNodesM[i].id,\n        to: \"T\",\n        type: \"creators\"\n      });\n    }\n\n    for (var i = 0; i < newNodesT.length; i++) {\n      newLinksT.push({\n        id: \"LN\" + i,\n        from: newNodesT[i].id,\n        to: newNodesT[i].id.substring(\n          newNodesT[i].id.indexOf(\"A\"),\n          newNodesT[i].id.indexOf(\"N\")\n        ),\n        type: \"annots\"\n      });\n    }\n\n    var newLinks = newLinksM.concat(newLinksT);\n    // console.log(\"newLinks\", newLinks);\n\n    var self = this;\n    if (selectedTag !== \"\" && selectedTag !== self.state.preTag) {\n      var t = new Chart({\n        container: document.getElementById(\"chartNetChart\"),\n        area: {\n          style: { fillColor: \"#f9fbfd\" }\n        },\n        navigation: {\n          focusNodeExpansionRadius: 1,\n          initialNodes: [\"T\"],\n          mode: \"focusnodes\"\n        },\n        layout: {\n          mode: \"radial\",\n          nodeSpacing: 30\n        },\n        style: {\n          node: {\n            display: \"roundtext\",\n            lineWidth: 5\n            // lineDash: [10, 2, 5, 2]\n          },\n          nodeStyleFunction: nodeStyle,\n          linkStyleFunction: linkStyle,\n          link: {\n            fillColor: \"#D8D8D8\"\n            // lineDash: [10, 5, 5, 5]\n          },\n          nodeHovered: {\n            shadowBlur: 1\n          },\n          linkHovered: {\n            shadowBlur: 1\n          },\n          nodeLabel: {\n            textStyle: { fillColor: \"white\" }\n          }\n          // nodeStyleFunction: function(node) {\n          //   node.image =\n          //     \"https://zoomcharts.com/dvsl/data/net-chart/friend-net/\" +\n          //     node.id +\n          //     \".png\";\n          //   node.label = node.data.name;\n          // }\n        },\n        data: {\n          preloaded: {\n            nodes: newNodes,\n            links: newLinks\n          }\n        },\n        events: {\n          onDoubleClick: graphDoubleClick\n        },\n        toolbar: {\n          fullscreen: true,\n          enabled: true\n        },\n        interaction: {\n          resizing: {\n            enabled: false\n          }\n        }\n      });\n\n      function nodeStyle(node) {\n        if (node.hovered) {\n          node.radius = 38;\n        } else {\n          node.radius = 30;\n        }\n      }\n\n      function linkStyle(link) {\n        if (link.hovered) {\n          link.radius = 2;\n          link.fillColor = \"#979797\";\n          link.shadowColor = \"#979797\";\n        } else {\n          link.radius = 1;\n          link.fillColor = \"#D8D8D8\";\n        }\n      }\n      function graphDoubleClick(event) {\n        event.preventDefault();\n        if (event.clickNode.data.annotId) {\n          self.setState({\n            annotId: event.clickNode.data.annotId,\n            visible: true,\n            preTag: selectedTag\n          });\n\n          self.props.fetchFullAnnot(event.clickNode.data.annotId);\n        }\n      }\n    }\n  }\n\n  handleSidebarHide = () => this.setState({ visible: false });\n\n  renderAnnots() {\n    // console.log(\"annotprops\", this.props.searchedAnnots.data);\n    // console.log(\n    //   \"annotprops jason\",\n    //   JSON.stringify(this.props.searchedAnnots.data)\n    // );\n\n    if (this.props.passTag == \"\") {\n      return (\n        <div className=\"img-container\">\n          <img className=\"temp-image\" src={networkIcon} alt=\"network icon\" />\n          <p className=\"temp-text\">\n            <span className=\"text-color-red\">Choose</span> or{\" \"}\n            <span className=\"text-color-blue\">Search</span> the Tag <br /> to\n            Create Your Personal Learning Network\n          </p>\n        </div>\n      );\n    }\n\n    // return this.props.searchedAnnots.data.map(annot => {\n    //   return (\n    //     <div key={annot.id}>\n    //       <p>{annot.user}</p>\n    //       <p>{annot.text}</p>\n    //       <p className=\"tags\">{annot.tags.join(\", \")}</p>\n    //     </div>\n    //   );\n    // });\n  }\n\n  render() {\n    const { visible } = this.state;\n    return (\n      <div className=\"map-container\">\n        <Sidebar.Pushable as={Segment}>\n          <Sidebar\n            as={Menu}\n            animation=\"overlay\"\n            icon=\"labeled\"\n            inverted\n            onHide={this.handleSidebarHide}\n            vertical\n            visible={visible}\n            width=\"wide\"\n            direction=\"right\"\n          >\n            {/* <Menu.Item as=\"a\">\n              <Icon name=\"home\" />\n              Home\n            </Menu.Item>\n            <Menu.Item as=\"a\">\n              <Icon name=\"gamepad\" />\n              Games\n            </Menu.Item>\n            <Menu.Item as=\"a\">\n              <Icon name=\"camera\" />\n              Channels\n            </Menu.Item> */}\n            <AnnotSidebar />\n          </Sidebar>\n\n          <Sidebar.Pusher>\n            <Segment basic>\n              <div id=\"chartNetChart\" className=\"chart\" />\n              <p className=\"cover\" />\n              <div>{this.renderAnnots()}</div>\n              {/* <p>passId: {this.state.annotId}</p> */}\n            </Segment>\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </div>\n    );\n  }\n}\n\nexport default NetworkMap;\n"]},"metadata":{},"sourceType":"module"}