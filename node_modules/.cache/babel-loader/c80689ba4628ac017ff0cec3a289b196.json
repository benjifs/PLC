{"ast":null,"code":"import _classCallCheck from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/src/components/NetworkMap.js\";\nimport \"../css/NetworkMap.css\";\nimport React from \"react\";\nimport networkIcon from \"../assets/connection.png\";\nimport zc from \"@dvsl/zoomcharts\";\nimport AnnotSidebar from \"./Sidebar\";\nimport { connect } from \"react-redux\";\nimport { fetchFullAnnot, fetchPageAnnots } from \"../actions\";\nimport { Menu, Segment, Sidebar } from \"semantic-ui-react\";\nvar Chart = zc.NetChart; // Zoomcharts license and license key\n\nwindow.ZoomChartsLicense = \"ZCS-101rm718m: ZoomCharts SDK 30 day Free Trial License for che..@..l.com (valid for testing only); upgrades until: 2020-03-21\";\nwindow.ZoomChartsLicenseKey = \"39d8cd3eba17f98d5c4b5862a4db1effed5b48b4f96a0d9450\" + \"229bb8b24b0f012c2e95c31e6fdd092901628a73aa3511b6aca50b26575c1dc9c5033b42243a0\" + \"842344a7ea2b32b34cbfc406ea3ea1e1950de24892ebcf773a8157a460fa346039dbd27458a43\" + \"1b5a855d2da8c211526c28caba6402542aac71a8af5b2e3982387394dbf9f4b450da9b8017aad\" + \"08d6e9057b6f40cfa3f52c7cec3b38a40e93e5b6074da373c42810f8f7171396566c2ffacbb12\" + \"5fcf57332ec7afb9264fc6d35a2bb9e20830093d469d92fef823020004ec2dd7f908ee9a7bfb6\" + \"c5fd0134969d7dca1050eeffed66884866f97ae26895c32dd13c8e5cf6c9c37e4a1169ccdaa01\";\n\nvar NetworkMap =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NetworkMap, _React$Component);\n\n  function NetworkMap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, NetworkMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NetworkMap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      annotId: \"\",\n      visible: false,\n      preTag: \"\",\n      nodeId: \"\",\n      incontext: \"\",\n      backMap: _this.props.backMap\n    };\n\n    _this.handleSidebarHide = function () {\n      return _this.setState({\n        visible: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(NetworkMap, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // console.log(\"pass tag here:\", this.props.passTag);\n      // console.log(\"show me\", this.props.searchedAnnots.data);\n      var selectedTag = this.props.passTag; // const backMap = this.props.backMap;\n\n      var array = this.props.searchedAnnots.data.filter(function (arr) {\n        return arr.references === undefined;\n      });\n      var pageArray = this.props.searchedAnnots.Pagedata.filter(function (arr) {\n        return arr.references === undefined;\n      });\n      console.log(\"new array for page\", pageArray);\n      var testData = {\n        nodes: [{\n          id: \"LLL\",\n          style: {\n            label: this.state.incontext\n          },\n          loaded: true\n        }, {\n          id: \"A0N0U0C0\",\n          sytle: {\n            label: \"user 1 user 1 user 1 user 1 \"\n          },\n          loaded: true\n        }, {\n          id: \"A0N0U0C1\",\n          sytle: {\n            label: \"user 2 user 1 user 1 user 1\"\n          },\n          loaded: true\n        }, {\n          id: \"A0N0U0C2\",\n          sytle: {\n            label: \"user 3 user 1 user 1 user 1\"\n          },\n          loaded: true\n        }],\n        links: [{\n          id: \"LNUC0\",\n          from: \"A0N0U0C0\",\n          to: \"LLL\"\n        }, {\n          id: \"LNUC1\",\n          from: \"A0N0U0C1\",\n          to: \"LLL\"\n        }, {\n          id: \"LNUC2\",\n          from: \"A0N0U0C2\",\n          to: \"LLL\"\n        }]\n      }; // const pageAnnots = this.props.pageAnnots;\n      // if (pageAnnots.length !== 0) {\n      //   console.log(\"all annots on page!!\", pageAnnots);\n      // }\n\n      var annotArray = array.map(function (arr) {\n        return {\n          annotId: arr.id,\n          created: arr.created,\n          document: arr.document,\n          // links: arr.links,\n          tags: arr.tags,\n          target: arr.target,\n          text: arr.text,\n          uri: arr.uri,\n          incontext: arr.links.incontext,\n          user: arr.user.substring(arr.user.indexOf(\":\") + 1, arr.user.indexOf(\"@\"))\n        };\n      }); // console.log(\"no references:\", annotArray);\n\n      var arrayModify = annotArray.reduce(function (o, cur) {\n        var occurs = o.reduce(function (n, item, i) {\n          return item.user === cur.user ? i : n;\n        }, -1);\n\n        if (occurs >= 0) {\n          o[occurs].text = o[occurs].text.concat(cur.text);\n          o[occurs].annotId = o[occurs].annotId.concat(cur.annotId);\n          o[occurs].uri = o[occurs].uri.concat(cur.uri);\n          o[occurs].incontext = o[occurs].incontext.concat(cur.incontext);\n        } else {\n          var obj = {\n            user: cur.user,\n            text: [cur.text],\n            annotId: [cur.annotId],\n            uri: [cur.uri],\n            incontext: [cur.incontext]\n          };\n          o = o.concat([obj]);\n        }\n\n        return o;\n      }, []); // console.log(\"same user array:\", arrayModify);\n\n      var newNodesM = [];\n      var newNodesT = [];\n      var newNodesF = [];\n      var newLinksM = [];\n      var newLinksT = [];\n      var newLinksF = []; // nodes data\n\n      for (var i = 0; i < arrayModify.length; i++) {\n        newNodesM.push({\n          id: \"A\" + i,\n          style: {\n            label: arrayModify[i].user,\n            fillColor: \"#65BCF8\",\n            lineColor: \"rgba(89, 168, 223, 0.5)\"\n          },\n          loaded: true\n        });\n      }\n\n      var newNodesMM = [{\n        id: \"T\",\n        style: {\n          label: selectedTag,\n          fillColor: \"#912F40\",\n          lineColor: \"rgba(171, 25, 39, 0.5)\"\n        },\n        loaded: true\n      }].concat(newNodesM);\n\n      for (var j = 0; j < arrayModify.length; j++) {\n        if (arrayModify[j].text.length > 1) {\n          for (var k = 0; k < arrayModify[j].text.length; k++) {\n            newNodesT.push({\n              id: \"A\" + j + \"N\" + k,\n              style: {\n                label: arrayModify[j].text[k],\n                fillColor: \"#68CF9D\",\n                lineColor: \"rgba(98, 188, 144, 0.5)\"\n              },\n              annotId: arrayModify[j].annotId[k],\n              loaded: true,\n              multiple: \"yes\"\n            });\n            newNodesF.push({\n              id: \"A\" + j + \"N\" + k + \"U\" + k,\n              style: {\n                label: arrayModify[j].uri[k],\n                fillColor: \"#ffd86e\",\n                lineColor: \"#F4C230\",\n                lineDash: [10, 5, 2, 5],\n                lineWidth: 2\n              },\n              incontext: arrayModify[j].incontext[k],\n              loaded: true,\n              multiple: \"yes\"\n            });\n          }\n        } else {\n          newNodesT.push({\n            id: \"A\" + j + \"N\" + j,\n            style: {\n              label: arrayModify[j].text[0],\n              fillColor: \"#68CF9D\",\n              lineColor: \"rgba(98, 188, 144, 0.5)\"\n            },\n            annotId: arrayModify[j].annotId[0],\n            loaded: true\n          });\n          newNodesF.push({\n            id: \"A\" + j + \"N\" + j + \"U\" + j,\n            style: {\n              label: arrayModify[j].uri[0],\n              fillColor: \"#ffd86e\",\n              lineColor: \"#F4C230\",\n              lineDash: [10, 5, 2, 5],\n              lineWidth: 2\n            },\n            incontext: arrayModify[j].incontext[0],\n            loaded: true\n          });\n        }\n      }\n\n      var newNodes = newNodesMM.concat(newNodesT, newNodesF); // console.log(\"newNodes\", newNodes);\n      // links data\n\n      for (var i = 0; i < newNodesM.length; i++) {\n        newLinksM.push({\n          id: \"L\" + i,\n          from: newNodesM[i].id,\n          to: \"T\",\n          type: \"creators\"\n        });\n      }\n\n      for (var i = 0; i < newNodesT.length; i++) {\n        newLinksT.push({\n          id: \"LN\" + i,\n          from: newNodesT[i].id,\n          to: newNodesT[i].id.substring(newNodesT[i].id.indexOf(\"A\"), newNodesT[i].id.indexOf(\"N\")),\n          type: \"annots\"\n        });\n        newLinksF.push({\n          id: \"LNU\" + i,\n          from: newNodesF[i].id,\n          to: newNodesF[i].id.substring(newNodesF[i].id.indexOf(\"A\"), newNodesF[i].id.indexOf(\"U\")),\n          type: \"uri\"\n        });\n      }\n\n      var newLinks = newLinksM.concat(newLinksT, newLinksF); // console.log(\"newLinks\", newLinks);\n\n      var self = this;\n      var selfProps = this.props;\n\n      if (selectedTag !== \"\") {\n        var nodeStyle = function nodeStyle(node) {\n          if (node.hovered) {\n            node.radius = 38;\n\n            if (node.data === undefined) {\n              return;\n            } else if (node.data.id.indexOf(\"N\") !== -1 && node.data.id.indexOf(\"U\") === -1) {\n              node.items = [{\n                text: \"ANNOTATION\",\n                backgroundStyle: {\n                  fillColor: \"rgba(98, 188, 144, 0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: {\n                  fillColor: \"white\"\n                },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }];\n            } else if (node.data.id.indexOf(\"N\") === -1 && node.data.id !== \"T\") {\n              node.items = [{\n                text: \"USER\",\n                backgroundStyle: {\n                  fillColor: \"rgba(89, 168, 223, 0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: {\n                  fillColor: \"white\"\n                },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }];\n            } else if (node.data.id === \"T\") {\n              node.items = [{\n                text: \"TAG\",\n                backgroundStyle: {\n                  fillColor: \"rgba(171, 25, 39, 0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: {\n                  fillColor: \"white\"\n                },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }];\n            } else if (node.data.id.indexOf(\"U\") !== -1) {\n              node.items = [{\n                text: \"WEB PAGE\",\n                backgroundStyle: {\n                  fillColor: \"rgba(255,216,110,0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: {\n                  fillColor: \"white\"\n                },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }];\n            }\n          } else {\n            node.radius = 30;\n            node.items = [{\n              text: \"aaa\",\n              textStyle: {\n                fillColor: \"transparent\"\n              },\n              backgroundStyle: {\n                fillColor: \"transparent\",\n                lineColor: \"transparent\"\n              }\n            }];\n          }\n        };\n\n        var linkStyle = function linkStyle(link) {\n          if (link.hovered) {\n            link.radius = 2;\n            link.fillColor = \"#979797\";\n            link.shadowColor = \"#979797\";\n          } else {\n            link.radius = 1;\n            link.fillColor = \"#D8D8D8\";\n          }\n        };\n\n        var graphDoubleClick = function graphDoubleClick(event) {\n          event.preventDefault();\n          console.log(\"tell me double\", event.clickNode);\n\n          if (event.clickNode === undefined) {\n            return;\n          } else if (event.clickNode.data.annotId) {\n            self.setState({\n              annotId: event.clickNode.data.annotId,\n              visible: true,\n              preTag: selectedTag\n            });\n            selfProps.fetchFullAnnot(event.clickNode.data.annotId);\n          }\n\n          if (event.clickNode.data.incontext) {\n            // console.log(\"original page:\", event.clickNode.data.incontext);\n            window.open(event.clickNode.data.incontext);\n          }\n        };\n\n        var graghClick = function graghClick(event) {\n          if (event.clickNode === undefined) {\n            return;\n          } else if (event.clickNode.data.incontext && event.clickNode.data.incontext !== self.state.incontext) {\n            console.log(\"search annot on this page:\", event.clickNode.data);\n            self.setState({\n              nodeId: event.clickNode.data.id,\n              incontext: event.clickNode.data.incontext,\n              backMap: true\n            });\n            selfProps.fetchPageAnnots(event.clickNode.data.style.label);\n          }\n        };\n\n        console.log(\"tell me why:\", self.state.backMap);\n\n        if (self.state.backMap) {\n          var t = new Chart({\n            container: document.getElementById(\"chartNetChart\"),\n            area: {\n              style: {\n                fillColor: \"#f9fbfd\"\n              }\n            },\n            navigation: {\n              focusNodeExpansionRadius: 1,\n              initialNodes: [\"LLL\"],\n              mode: \"focusnodes\",\n              autoZoomOnFocus: true\n            },\n            layout: {\n              mode: \"radial\",\n              nodeSpacing: 30\n            },\n            style: {\n              node: {\n                display: \"roundtext\",\n                lineWidth: 5\n              },\n              nodeStyleFunction: nodeStyle,\n              linkStyleFunction: linkStyle,\n              link: {\n                fillColor: \"#D8D8D8\"\n              },\n              nodeHovered: {\n                shadowBlur: 1\n              },\n              linkHovered: {\n                shadowBlur: 1\n              },\n              nodeLabel: {\n                textStyle: {\n                  fillColor: \"white\"\n                }\n              }\n            },\n            data: {\n              preloaded: {\n                nodes: testData.nodes,\n                links: testData.links\n              }\n            },\n            // events: {\n            //   onDoubleClick: graphDoubleClick,\n            //   onClick: graghClick\n            // },\n            toolbar: {\n              fullscreen: true,\n              enabled: true\n            },\n            interaction: {\n              resizing: {\n                enabled: false\n              }\n            }\n          });\n        } else {\n          var t = new Chart({\n            container: document.getElementById(\"chartNetChart\"),\n            area: {\n              style: {\n                fillColor: \"#f9fbfd\"\n              }\n            },\n            navigation: {\n              focusNodeExpansionRadius: 1,\n              initialNodes: [\"T\"],\n              mode: \"focusnodes\",\n              autoZoomOnFocus: true\n            },\n            layout: {\n              mode: \"radial\",\n              nodeSpacing: 30\n            },\n            style: {\n              node: {\n                display: \"roundtext\",\n                lineWidth: 5\n              },\n              nodeStyleFunction: nodeStyle,\n              linkStyleFunction: linkStyle,\n              link: {\n                fillColor: \"#D8D8D8\"\n              },\n              nodeHovered: {\n                shadowBlur: 1\n              },\n              linkHovered: {\n                shadowBlur: 1\n              },\n              nodeLabel: {\n                textStyle: {\n                  fillColor: \"white\"\n                }\n              }\n            },\n            data: {\n              preloaded: {\n                nodes: newNodes,\n                links: newLinks\n              }\n            },\n            events: {\n              onDoubleClick: graphDoubleClick,\n              onClick: graghClick\n            },\n            toolbar: {\n              fullscreen: true,\n              enabled: true\n            },\n            interaction: {\n              resizing: {\n                enabled: false\n              },\n              zooming: {\n                zoomInOnDoubleClick: true\n              }\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"renderAnnots\",\n    value: function renderAnnots() {\n      if (this.props.passTag == \"\") {\n        return React.createElement(\"div\", {\n          className: \"img-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 555\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"temp-image\",\n          src: networkIcon,\n          alt: \"network icon\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 556\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"temp-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 557\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"text-color-red\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558\n          },\n          __self: this\n        }, \"Choose\"), \" or\", \" \", React.createElement(\"span\", {\n          className: \"text-color-blue\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 559\n          },\n          __self: this\n        }, \"Search\"), \" the Tag \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 559\n          },\n          __self: this\n        }), \" to Create Your Personal Learning Network\"));\n      }\n    }\n  }, {\n    key: \"renderBack\",\n    value: function renderBack() {\n      var _this2 = this;\n\n      if (this.state.backMap === true) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 570\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this2.setState({\n              backMap: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 571\n          },\n          __self: this\n        }, \"click me and back\"));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var visible = this.state.visible;\n      var annotData = this.props.fullAnnots;\n      return React.createElement(\"div\", {\n        className: \"map-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      }, React.createElement(Sidebar.Pushable, {\n        as: Segment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        as: Menu,\n        animation: \"overlay\",\n        icon: \"labeled\",\n        inverted: true,\n        onHide: this.handleSidebarHide,\n        vertical: true,\n        visible: visible,\n        width: \"wide\",\n        direction: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585\n        },\n        __self: this\n      }, React.createElement(AnnotSidebar, {\n        fullAnnots: {\n          annotData: annotData\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596\n        },\n        __self: this\n      })), React.createElement(Sidebar.Pusher, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 599\n        },\n        __self: this\n      }, React.createElement(Segment, {\n        basic: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 600\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"chartNetChart\",\n        className: \"chart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 601\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603\n        },\n        __self: this\n      }, this.renderBack()), React.createElement(\"p\", {\n        className: \"cover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605\n        },\n        __self: this\n      }, this.renderAnnots())))));\n    }\n  }]);\n\n  return NetworkMap;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  // console.log(\"full annot:\", state.fullAnnot);\n  return {\n    fullAnnots: state.fullAnnot\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchFullAnnot: fetchFullAnnot,\n  fetchPageAnnots: fetchPageAnnots\n})(NetworkMap);","map":{"version":3,"sources":["/Users/wchen/Dropbox/UMN/2019_Spring/PLB_Capstone/PLB_Capstone/src/components/NetworkMap.js"],"names":["React","networkIcon","zc","AnnotSidebar","connect","fetchFullAnnot","fetchPageAnnots","Menu","Segment","Sidebar","Chart","NetChart","window","ZoomChartsLicense","ZoomChartsLicenseKey","NetworkMap","state","annotId","visible","preTag","nodeId","incontext","backMap","props","handleSidebarHide","setState","selectedTag","passTag","array","searchedAnnots","data","filter","arr","references","undefined","pageArray","Pagedata","console","log","testData","nodes","id","style","label","loaded","sytle","links","from","to","annotArray","map","created","document","tags","target","text","uri","user","substring","indexOf","arrayModify","reduce","o","cur","occurs","n","item","i","concat","obj","newNodesM","newNodesT","newNodesF","newLinksM","newLinksT","newLinksF","length","push","fillColor","lineColor","newNodesMM","j","k","multiple","lineDash","lineWidth","newNodes","type","newLinks","self","selfProps","nodeStyle","node","hovered","radius","items","backgroundStyle","textStyle","px","py","x","y","aspectRatio","scaleWithZoom","scaleWithSize","maxWidth","padding","linkStyle","link","shadowColor","graphDoubleClick","event","preventDefault","clickNode","open","graghClick","t","container","getElementById","area","navigation","focusNodeExpansionRadius","initialNodes","mode","autoZoomOnFocus","layout","nodeSpacing","display","nodeStyleFunction","linkStyleFunction","nodeHovered","shadowBlur","linkHovered","nodeLabel","preloaded","toolbar","fullscreen","enabled","interaction","resizing","events","onDoubleClick","onClick","zooming","zoomInOnDoubleClick","annotData","fullAnnots","renderBack","renderAnnots","Component","mapStateToProps","fullAnnot"],"mappings":"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","sourcesContent":["import \"../css/NetworkMap.css\";\nimport React from \"react\";\nimport networkIcon from \"../assets/connection.png\";\nimport zc from \"@dvsl/zoomcharts\";\nimport AnnotSidebar from \"./Sidebar\";\nimport { connect } from \"react-redux\";\nimport { fetchFullAnnot, fetchPageAnnots } from \"../actions\";\n\nimport { Menu, Segment, Sidebar } from \"semantic-ui-react\";\n\nlet Chart = zc.NetChart;\n\n// Zoomcharts license and license key\nwindow.ZoomChartsLicense =\n  \"ZCS-101rm718m: ZoomCharts SDK 30 day Free Trial License for che..@..l.com (valid for testing only); upgrades until: 2020-03-21\";\nwindow.ZoomChartsLicenseKey =\n  \"39d8cd3eba17f98d5c4b5862a4db1effed5b48b4f96a0d9450\" +\n  \"229bb8b24b0f012c2e95c31e6fdd092901628a73aa3511b6aca50b26575c1dc9c5033b42243a0\" +\n  \"842344a7ea2b32b34cbfc406ea3ea1e1950de24892ebcf773a8157a460fa346039dbd27458a43\" +\n  \"1b5a855d2da8c211526c28caba6402542aac71a8af5b2e3982387394dbf9f4b450da9b8017aad\" +\n  \"08d6e9057b6f40cfa3f52c7cec3b38a40e93e5b6074da373c42810f8f7171396566c2ffacbb12\" +\n  \"5fcf57332ec7afb9264fc6d35a2bb9e20830093d469d92fef823020004ec2dd7f908ee9a7bfb6\" +\n  \"c5fd0134969d7dca1050eeffed66884866f97ae26895c32dd13c8e5cf6c9c37e4a1169ccdaa01\";\n\nclass NetworkMap extends React.Component {\n  state = {\n    annotId: \"\",\n    visible: false,\n    preTag: \"\",\n    nodeId: \"\",\n    incontext: \"\",\n    backMap: this.props.backMap\n  };\n\n  componentDidUpdate() {\n    // console.log(\"pass tag here:\", this.props.passTag);\n    // console.log(\"show me\", this.props.searchedAnnots.data);\n    const selectedTag = this.props.passTag;\n    // const backMap = this.props.backMap;\n\n    const array = this.props.searchedAnnots.data.filter(arr => {\n      return arr.references === undefined;\n    });\n    const pageArray = this.props.searchedAnnots.Pagedata.filter(arr => {\n      return arr.references === undefined;\n    });\n    console.log(\"new array for page\", pageArray);\n\n    var testData = {\n      nodes: [\n        {\n          id: \"LLL\",\n          style: {\n            label: this.state.incontext\n          },\n          loaded: true\n        },\n        {\n          id: \"A0N0U0C0\",\n          sytle: {\n            label: \"user 1 user 1 user 1 user 1 \"\n          },\n          loaded: true\n        },\n        {\n          id: \"A0N0U0C1\",\n          sytle: {\n            label: \"user 2 user 1 user 1 user 1\"\n          },\n          loaded: true\n        },\n        {\n          id: \"A0N0U0C2\",\n          sytle: {\n            label: \"user 3 user 1 user 1 user 1\"\n          },\n          loaded: true\n        }\n      ],\n      links: [\n        {\n          id: \"LNUC0\",\n          from: \"A0N0U0C0\",\n          to: \"LLL\"\n        },\n        {\n          id: \"LNUC1\",\n          from: \"A0N0U0C1\",\n          to: \"LLL\"\n        },\n        {\n          id: \"LNUC2\",\n          from: \"A0N0U0C2\",\n          to: \"LLL\"\n        }\n      ]\n    };\n\n    // const pageAnnots = this.props.pageAnnots;\n    // if (pageAnnots.length !== 0) {\n    //   console.log(\"all annots on page!!\", pageAnnots);\n    // }\n\n    const annotArray = array.map(arr => {\n      return {\n        annotId: arr.id,\n        created: arr.created,\n        document: arr.document,\n        // links: arr.links,\n        tags: arr.tags,\n        target: arr.target,\n        text: arr.text,\n        uri: arr.uri,\n        incontext: arr.links.incontext,\n        user: arr.user.substring(\n          arr.user.indexOf(\":\") + 1,\n          arr.user.indexOf(\"@\")\n        )\n      };\n    });\n    // console.log(\"no references:\", annotArray);\n\n    const arrayModify = annotArray.reduce((o, cur) => {\n      var occurs = o.reduce((n, item, i) => {\n        return item.user === cur.user ? i : n;\n      }, -1);\n      if (occurs >= 0) {\n        o[occurs].text = o[occurs].text.concat(cur.text);\n        o[occurs].annotId = o[occurs].annotId.concat(cur.annotId);\n        o[occurs].uri = o[occurs].uri.concat(cur.uri);\n        o[occurs].incontext = o[occurs].incontext.concat(cur.incontext);\n      } else {\n        var obj = {\n          user: cur.user,\n          text: [cur.text],\n          annotId: [cur.annotId],\n          uri: [cur.uri],\n          incontext: [cur.incontext]\n        };\n        o = o.concat([obj]);\n      }\n      return o;\n    }, []);\n\n    // console.log(\"same user array:\", arrayModify);\n\n    const newNodesM = [];\n    const newNodesT = [];\n    const newNodesF = [];\n\n    const newLinksM = [];\n    const newLinksT = [];\n    const newLinksF = [];\n\n    // nodes data\n    for (var i = 0; i < arrayModify.length; i++) {\n      newNodesM.push({\n        id: \"A\" + i,\n        style: {\n          label: arrayModify[i].user,\n          fillColor: \"#65BCF8\",\n          lineColor: \"rgba(89, 168, 223, 0.5)\"\n        },\n        loaded: true\n      });\n    }\n\n    var newNodesMM = [\n      {\n        id: \"T\",\n        style: {\n          label: selectedTag,\n          fillColor: \"#912F40\",\n          lineColor: \"rgba(171, 25, 39, 0.5)\"\n        },\n        loaded: true\n      },\n      ...newNodesM\n    ];\n\n    for (var j = 0; j < arrayModify.length; j++) {\n      if (arrayModify[j].text.length > 1) {\n        for (var k = 0; k < arrayModify[j].text.length; k++) {\n          newNodesT.push({\n            id: \"A\" + j + \"N\" + k,\n            style: {\n              label: arrayModify[j].text[k],\n              fillColor: \"#68CF9D\",\n\n              lineColor: \"rgba(98, 188, 144, 0.5)\"\n            },\n            annotId: arrayModify[j].annotId[k],\n            loaded: true,\n            multiple: \"yes\"\n          });\n          newNodesF.push({\n            id: \"A\" + j + \"N\" + k + \"U\" + k,\n            style: {\n              label: arrayModify[j].uri[k],\n              fillColor: \"#ffd86e\",\n              lineColor: \"#F4C230\",\n              lineDash: [10, 5, 2, 5],\n              lineWidth: 2\n            },\n            incontext: arrayModify[j].incontext[k],\n            loaded: true,\n            multiple: \"yes\"\n          });\n        }\n      } else {\n        newNodesT.push({\n          id: \"A\" + j + \"N\" + j,\n          style: {\n            label: arrayModify[j].text[0],\n            fillColor: \"#68CF9D\",\n\n            lineColor: \"rgba(98, 188, 144, 0.5)\"\n          },\n          annotId: arrayModify[j].annotId[0],\n\n          loaded: true\n        });\n        newNodesF.push({\n          id: \"A\" + j + \"N\" + j + \"U\" + j,\n          style: {\n            label: arrayModify[j].uri[0],\n            fillColor: \"#ffd86e\",\n            lineColor: \"#F4C230\",\n            lineDash: [10, 5, 2, 5],\n            lineWidth: 2\n          },\n          incontext: arrayModify[j].incontext[0],\n\n          loaded: true\n        });\n      }\n    }\n\n    const newNodes = newNodesMM.concat(newNodesT, newNodesF);\n    // console.log(\"newNodes\", newNodes);\n\n    // links data\n    for (var i = 0; i < newNodesM.length; i++) {\n      newLinksM.push({\n        id: \"L\" + i,\n        from: newNodesM[i].id,\n        to: \"T\",\n        type: \"creators\"\n      });\n    }\n\n    for (var i = 0; i < newNodesT.length; i++) {\n      newLinksT.push({\n        id: \"LN\" + i,\n        from: newNodesT[i].id,\n        to: newNodesT[i].id.substring(\n          newNodesT[i].id.indexOf(\"A\"),\n          newNodesT[i].id.indexOf(\"N\")\n        ),\n        type: \"annots\"\n      });\n      newLinksF.push({\n        id: \"LNU\" + i,\n        from: newNodesF[i].id,\n        to: newNodesF[i].id.substring(\n          newNodesF[i].id.indexOf(\"A\"),\n          newNodesF[i].id.indexOf(\"U\")\n        ),\n        type: \"uri\"\n      });\n    }\n\n    var newLinks = newLinksM.concat(newLinksT, newLinksF);\n    // console.log(\"newLinks\", newLinks);\n\n    var self = this;\n    var selfProps = this.props;\n\n    if (selectedTag !== \"\") {\n      console.log(\"tell me why:\", self.state.backMap);\n      if (self.state.backMap) {\n        var t = new Chart({\n          container: document.getElementById(\"chartNetChart\"),\n          area: {\n            style: { fillColor: \"#f9fbfd\" }\n          },\n          navigation: {\n            focusNodeExpansionRadius: 1,\n            initialNodes: [\"LLL\"],\n            mode: \"focusnodes\",\n            autoZoomOnFocus: true\n          },\n          layout: {\n            mode: \"radial\",\n            nodeSpacing: 30\n          },\n          style: {\n            node: {\n              display: \"roundtext\",\n              lineWidth: 5\n            },\n            nodeStyleFunction: nodeStyle,\n            linkStyleFunction: linkStyle,\n            link: {\n              fillColor: \"#D8D8D8\"\n            },\n            nodeHovered: {\n              shadowBlur: 1\n            },\n            linkHovered: {\n              shadowBlur: 1\n            },\n            nodeLabel: {\n              textStyle: { fillColor: \"white\" }\n            }\n          },\n          data: {\n            preloaded: {\n              nodes: testData.nodes,\n              links: testData.links\n            }\n          },\n          // events: {\n          //   onDoubleClick: graphDoubleClick,\n          //   onClick: graghClick\n          // },\n          toolbar: {\n            fullscreen: true,\n            enabled: true\n          },\n          interaction: {\n            resizing: {\n              enabled: false\n            }\n          }\n        });\n      } else {\n        var t = new Chart({\n          container: document.getElementById(\"chartNetChart\"),\n          area: {\n            style: { fillColor: \"#f9fbfd\" }\n          },\n          navigation: {\n            focusNodeExpansionRadius: 1,\n            initialNodes: [\"T\"],\n            mode: \"focusnodes\",\n            autoZoomOnFocus: true\n          },\n          layout: {\n            mode: \"radial\",\n            nodeSpacing: 30\n          },\n          style: {\n            node: {\n              display: \"roundtext\",\n              lineWidth: 5\n            },\n            nodeStyleFunction: nodeStyle,\n            linkStyleFunction: linkStyle,\n            link: {\n              fillColor: \"#D8D8D8\"\n            },\n            nodeHovered: {\n              shadowBlur: 1\n            },\n            linkHovered: {\n              shadowBlur: 1\n            },\n            nodeLabel: {\n              textStyle: { fillColor: \"white\" }\n            }\n          },\n          data: {\n            preloaded: {\n              nodes: newNodes,\n              links: newLinks\n            }\n          },\n          events: {\n            onDoubleClick: graphDoubleClick,\n            onClick: graghClick\n          },\n          toolbar: {\n            fullscreen: true,\n            enabled: true\n          },\n          interaction: {\n            resizing: {\n              enabled: false\n            },\n            zooming: {\n              zoomInOnDoubleClick: true\n            }\n          }\n        });\n      }\n\n      function nodeStyle(node) {\n        if (node.hovered) {\n          node.radius = 38;\n          if (node.data === undefined) {\n            return;\n          } else if (\n            node.data.id.indexOf(\"N\") !== -1 &&\n            node.data.id.indexOf(\"U\") === -1\n          ) {\n            node.items = [\n              {\n                text: \"ANNOTATION\",\n                backgroundStyle: {\n                  fillColor: \"rgba(98, 188, 144, 0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: { fillColor: \"white\" },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }\n            ];\n          } else if (node.data.id.indexOf(\"N\") === -1 && node.data.id !== \"T\") {\n            node.items = [\n              {\n                text: \"USER\",\n                backgroundStyle: {\n                  fillColor: \"rgba(89, 168, 223, 0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: { fillColor: \"white\" },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }\n            ];\n          } else if (node.data.id === \"T\") {\n            node.items = [\n              {\n                text: \"TAG\",\n                backgroundStyle: {\n                  fillColor: \"rgba(171, 25, 39, 0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: { fillColor: \"white\" },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }\n            ];\n          } else if (node.data.id.indexOf(\"U\") !== -1) {\n            node.items = [\n              {\n                text: \"WEB PAGE\",\n                backgroundStyle: {\n                  fillColor: \"rgba(255,216,110,0.8)\",\n                  lineColor: \"transparent\"\n                },\n                textStyle: { fillColor: \"white\" },\n                px: 0,\n                py: -1,\n                x: 0,\n                y: -10,\n                aspectRatio: 0,\n                scaleWithZoom: true,\n                scaleWithSize: true,\n                maxWidth: 2,\n                padding: 2\n              }\n            ];\n          }\n        } else {\n          node.radius = 30;\n          node.items = [\n            {\n              text: \"aaa\",\n              textStyle: { fillColor: \"transparent\" },\n              backgroundStyle: {\n                fillColor: \"transparent\",\n                lineColor: \"transparent\"\n              }\n            }\n          ];\n        }\n      }\n\n      function linkStyle(link) {\n        if (link.hovered) {\n          link.radius = 2;\n          link.fillColor = \"#979797\";\n          link.shadowColor = \"#979797\";\n        } else {\n          link.radius = 1;\n          link.fillColor = \"#D8D8D8\";\n        }\n      }\n      function graphDoubleClick(event) {\n        event.preventDefault();\n        console.log(\"tell me double\", event.clickNode);\n        if (event.clickNode === undefined) {\n          return;\n        } else if (event.clickNode.data.annotId) {\n          self.setState({\n            annotId: event.clickNode.data.annotId,\n            visible: true,\n            preTag: selectedTag\n          });\n          selfProps.fetchFullAnnot(event.clickNode.data.annotId);\n        }\n        if (event.clickNode.data.incontext) {\n          // console.log(\"original page:\", event.clickNode.data.incontext);\n          window.open(event.clickNode.data.incontext);\n        }\n      }\n      function graghClick(event) {\n        if (event.clickNode === undefined) {\n          return;\n        } else if (\n          event.clickNode.data.incontext &&\n          event.clickNode.data.incontext !== self.state.incontext\n        ) {\n          console.log(\"search annot on this page:\", event.clickNode.data);\n\n          self.setState({\n            nodeId: event.clickNode.data.id,\n            incontext: event.clickNode.data.incontext,\n            backMap: true\n          });\n          selfProps.fetchPageAnnots(event.clickNode.data.style.label);\n        }\n      }\n    }\n  }\n\n  handleSidebarHide = () => this.setState({ visible: false });\n\n  renderAnnots() {\n    if (this.props.passTag == \"\") {\n      return (\n        <div className=\"img-container\">\n          <img className=\"temp-image\" src={networkIcon} alt=\"network icon\" />\n          <p className=\"temp-text\">\n            <span className=\"text-color-red\">Choose</span> or{\" \"}\n            <span className=\"text-color-blue\">Search</span> the Tag <br /> to\n            Create Your Personal Learning Network\n          </p>\n        </div>\n      );\n    }\n  }\n\n  renderBack() {\n    if (this.state.backMap === true) {\n      return (\n        <div>\n          <button onClick={() => this.setState({ backMap: false })}>\n            click me and back\n          </button>\n        </div>\n      );\n    }\n  }\n\n  render() {\n    const { visible } = this.state;\n    const annotData = this.props.fullAnnots;\n    return (\n      <div className=\"map-container\">\n        <Sidebar.Pushable as={Segment}>\n          <Sidebar\n            as={Menu}\n            animation=\"overlay\"\n            icon=\"labeled\"\n            inverted\n            onHide={this.handleSidebarHide}\n            vertical\n            visible={visible}\n            width=\"wide\"\n            direction=\"right\"\n          >\n            <AnnotSidebar fullAnnots={{ annotData }} />\n          </Sidebar>\n\n          <Sidebar.Pusher>\n            <Segment basic>\n              <div id=\"chartNetChart\" className=\"chart\" />\n              {/* <div>{this.renderBack()}</div> */}\n              <div>{this.renderBack()}</div>\n              <p className=\"cover\" />\n              <div>{this.renderAnnots()}</div>\n            </Segment>\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = state => {\n  // console.log(\"full annot:\", state.fullAnnot);\n  return { fullAnnots: state.fullAnnot };\n};\n\nexport default connect(\n  mapStateToProps,\n  { fetchFullAnnot, fetchPageAnnots }\n)(NetworkMap);\n"]},"metadata":{},"sourceType":"module"}